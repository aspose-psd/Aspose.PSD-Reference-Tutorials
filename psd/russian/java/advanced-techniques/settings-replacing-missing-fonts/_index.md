---
date: 2025-12-25
description: Узнайте, как заменять шрифты в PSD‑файлах с помощью Aspose.PSD для Java
  — пошаговое руководство, которое также показывает, как сохранять PSD в PNG и обрабатывать
  отсутствующие шрифты.
linktitle: Settings for Replacing Missing Fonts
second_title: Aspose.PSD Java API
title: Как заменить шрифты в Aspose.PSD для Java
url: /ru/java/advanced-techniques/settings-replacing-missing-fonts/
weight: 17
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# Как заменить шрифты в Aspose.PSD для Java

## Введение

Если вы работаете с файлами Photoshop (PSD) в Java‑приложении, отсутствие шрифтов может нарушить визуальное расположение и вызвать ошибки рендеринга. **Как быстро и надёжно заменить шрифты** — это важно для сохранения точности дизайна. В этом руководстве вы узнаете, как использовать Aspose.PSD для Java, чтобы заменить отсутствующие шрифты, конвертировать результат в PNG и обеспечить плавный процесс преобразования изображений. К концу вы сможете заменять шрифты в изображениях, сохранять PSD как PNG и избегать типичных подводных камней, с которыми сталкиваются разработчики.

## Краткие ответы
- **Что означает “replace fonts” в обработке PSD?** Это замена отсутствующих или недоступных шрифтов на указанный вами запасной шрифт.  
- **Какая библиотека делает это автоматически?** Aspose.PSD для Java предоставляет `PsdLoadOptions.setDefaultReplacementFont`.  
- **Могу ли я также конвертировать PSD в PNG после замены?** Да — используйте `PngOptions` и вызовите `psdImage.save`.  
- **Нужна ли лицензия для использования в продакшене?** Для сборок, не являющихся оценочными, требуется действующая лицензия Aspose.PSD.  
- **Какая версия Java поддерживается?** Любая среда выполнения Java 8+ совместима с текущим выпуском Aspose.PSD.

## Что такое замена шрифтов в PSD‑файлах?

Когда PSD ссылается на шрифт, который не установлен на машине, движок рендеринга переходит к общему шрифту, часто вызывая смещение текста. Замена шрифтов позволяет задать шрифт по умолчанию (например, Arial), который библиотека будет использовать каждый раз, когда встретит отсутствующий типографический набор, обеспечивая единообразный визуальный вывод.

## Почему заменять отсутствующие шрифты с помощью Aspose.PSD?

- **Решение без зависимостей** — не требуется Photoshop или внешние инструменты.  
- **Подготовлено для пакетной обработки** — обрабатывайте десятки файлов в цикле с одинаковыми настройками.  
- **Готово к конвертации изображений** — после замены вы можете сразу **save PSD as PNG** или **convert PSD to PNG** без дополнительных шагов.  
- **Кроссплатформенно** — работает в Java‑средах Windows, Linux и macOS.

## Требования

1. **Библиотека Aspose.PSD** — скачайте и установите Aspose.PSD для Java с [страницы релизов](https://releases.aspose.com/psd/java/).  
2. **Среда разработки Java** — установленный и настроенный JDK 8 или новее.  

Теперь, когда у нас есть основы, приступим к коду.

## Импорт пакетов

Начните с импорта необходимых классов Aspose.PSD. Это даст вам доступ к загрузке изображений, параметрам замены шрифтов и возможностям экспорта PNG.

```java
import com.aspose.psd.Image;

import com.aspose.psd.fileformats.png.PngColorType;
import com.aspose.psd.fileformats.psd.PsdImage;
import com.aspose.psd.imageloadoptions.PsdLoadOptions;
import com.aspose.psd.imageoptions.PngOptions;
```

## Шаг 1: Настройте каталог документов

Определите папку, содержащую исходный PSD, и место, куда будет сохранён полученный PNG.

```java
String dataDir = "Your Document Directory";
```

## Шаг 2: Укажите исходный и целевой файлы

Укажите полные пути к входному PSD и выходному PNG. Это делает процесс понятным и упрощает поддержку кода.

```java
String sourceFile = dataDir + "sample.psd";
String destName = dataDir + "result.png";
```

## Шаг 3: Настройте параметры замены шрифтов

Создайте экземпляр `PsdLoadOptions` и укажите Aspose.PSD, какой шрифт использовать, когда встречается отсутствующий. В этом примере мы используем **Arial**, но можете заменить его любым шрифтом, установленным в системе.

```java
PsdLoadOptions loadOptions = new PsdLoadOptions();
loadOptions.setDefaultReplacementFont("Arial");
```

## Шаг 4: Загрузите PSD‑изображение и замените шрифты

Загрузите PSD, используя параметры, определённые выше. Библиотека автоматически заменит любые отсутствующие шрифты на указанный вами шрифт по умолчанию.

```java
Image image = Image.load(sourceFile, loadOptions);
PsdImage psdImage = (PsdImage) image;
```

## Шаг 5: Сохраните изменённое изображение

Настройте параметры экспорта PNG — true color с альфа‑каналом — чтобы сохранить прозрачность. Этот шаг также демонстрирует **image conversion PSD to PNG** после замены шрифтов.

```java
PngOptions options = new PngOptions();
options.setColorType(PngColorType.TruecolorWithAlpha);
psdImage.save(destName, options);
```

### Что произошло?

- PSD был открыт с запасным шрифтом (Arial).  
- Все текстовые слои, которые изначально ссылались на отсутствующие шрифты, теперь рендерятся с Arial.  
- Финальное изображение сохранено как PNG, эффективно **saving PSD as PNG** при сохранении визуальной точности.

## Распространённые проблемы и устранение неполадок

| Проблема | Причина | Решение |
|----------|---------|---------|
| Текст всё ещё выглядит неправильно | Метрики шрифта отличаются (размер, толщина) | Программно скорректировать размер заменяемого шрифта или выбрать шрифт с похожими метриками. |
| PNG больше, чем ожидалось | Параметры PNG по умолчанию используют 32‑битный цвет | Переключить `PngColorType` на `Truecolor`, если альфа не нужна. |
| Исключение лицензии | Запуск без действующей лицензии | Применить временную или постоянную лицензию Aspose.PSD перед загрузкой изображения. |

## Часто задаваемые вопросы

**Q: Совместим ли Aspose.PSD со всеми версиями PSD?**  
A: Aspose.PSD поддерживает широкий диапазон версий PSD, от ранних выпусков Photoshop до самых новых функций.

**Q: Могу ли я использовать пользовательские шрифты для замены в Aspose.PSD?**  
A: Да, просто передайте имя пользовательского шрифта в `setDefaultReplacementFont`. Убедитесь, что шрифт доступен JVM.

**Q: Какие варианты лицензирования доступны для Aspose.PSD?**  
A: Ознакомьтесь с вариантами лицензирования [здесь](https://purchase.aspose.com/buy), чтобы выбрать лучший план для ваших нужд.

**Q: Есть ли сообщество поддержки Aspose.PSD?**  
A: Да, посетите [форум Aspose.PSD](https://forum.aspose.com/c/psd/34) для общения и получения помощи от сообщества.

**Q: Как получить временную лицензию для Aspose.PSD?**  
A: Получите временную лицензию [здесь](https://purchase.aspose.com/temporary-license/) для тестирования и оценки.

---

**Последнее обновление:** 2025-12-25  
**Тестировано с:** Aspose.PSD 24.11 for Java (самый свежий на момент написания)  
**Автор:** Aspose  

{{< /blocks/products/pf/tutorial-page-section >}}

{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}

{{< blocks/products/products-backtop-button >}}