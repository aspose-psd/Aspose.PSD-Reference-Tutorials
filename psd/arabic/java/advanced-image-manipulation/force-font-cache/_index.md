---
date: 2025-12-01
description: تعلم كيفية حفظ ملف PSD، وإجبار تخزين الخطوط المؤقت، وتحسين أداء الصور
  باستخدام Aspose.PSD للغة Java. دليل خطوة بخطوة لتحسين معالجة الصور.
linktitle: Force Font Cache
second_title: Aspose.PSD Java API
title: كيفية حفظ ملف PSD وإجبار ذاكرة التخزين المؤقت للخطوط باستخدام Aspose.PSD للـ
  Java
url: /ar/java/advanced-image-manipulation/force-font-cache/
weight: 11
---

{{< blocks/products/pf/main-wrap-class >}}
{{< blocks/products/pf/main-container >}}
{{< blocks/products/pf/tutorial-page-section >}}

# كيفية حفظ ملف PSD وإجبار ذاكرة التخزين المؤقت للخطوط باستخدام Aspose.PSD للـ Java

## مقدمة

إذا كنت بحاجة إلى **save PSD file** بسرعة مع التأكد من توفر الخطوط الصحيحة، فأنت في المكان المناسب. يمكن لذاكرة التخزين المؤقت للخطوط أن **تحسن أداء الصورة** بشكل كبير، خاصةً عندما تقوم بمعالجة مستندات Photoshop الكبيرة بشكل متكرر. في هذا الدرس سنستعرض الخطوات الدقيقة لإجبار ذاكرة التخزين المؤقت للخطوط، تحميل صورة PSD، وأخيرًا **save PSD file** باستخدام الخطوط المثبتة حديثًا عبر Aspose.PSD للـ Java.

## إجابات سريعة
- **ماذا يفعل إجبار ذاكرة التخزين المؤقت للخطوط؟** يقوم بإجبار Aspose.PSD على إعادة فحص خطوط النظام بحيث يتم التعرف على الخطوط المثبتة حديثًا على الفور.  
- **كم من الوقت يجب أن أنتظر لتثبيت الخط؟** يتوقف الكود النموذجي لمدة **دقيقتين**، وهو عادةً كافٍ للتثبيت اليدوي.  
- **هل يمكنني استخدام هذا مع أي ملف PSD؟** نعم – طالما أن الملف قابل للوصول وأن الخطوط المطلوبة مثبتة على النظام.  
- **هل أحتاج إلى ترخيص لتشغيل هذا الكود؟** يلزم وجود ترخيص مؤقت أو كامل للاستخدام في الإنتاج؛ نسخة تجريبية مجانية تكفي للتقييم.  
- **ما إصدارات Java المدعومة؟** Aspose.PSD للـ Java يعمل مع JDK 8 وما فوق.

## ما هو “save PSD file” ولماذا هو مهم؟

إن حفظ ملف PSD بعد تعديل طبقاته أو نصه أو خطوطه هو الخطوة النهائية التي تُثبت تغييراتك. عندما لا تكون ذاكرة التخزين المؤقت للخطوط محدثة، قد يعود الملف المحفوظ إلى الخطوط الافتراضية، مما يؤدي إلى تناقضات بصرية. بإجبار الذاكرة أولاً، تضمن أن عملية **save PSD file** تُضمّن الخطوط الصحيحة.

## لماذا نجبر ذاكرة التخزين المؤقت للخطوط مع Aspose.PSD؟

- **تحسين الأداء** – يقلل من الحاجة إلى عمليات البحث المتكررة عن الخطوط.  
- **الموثوقية** – يضمن أن ملفات PSD المحفوظة تُظهر نفس الشكل على أي جهاز.  
- **البساطة** – استدعاء طريقة واحدة (`OpenTypeFontsCache.updateCache()`) يتولى المهمة بالكامل.

## المتطلبات المسبقة

قبل البدء، تأكد من وجود ما يلي:

- مجموعة تطوير جافا (JDK) 8 أو أحدث مثبتة.  
- مكتبة Aspose.PSD للـ Java (قم بتنزيلها من [رابط التنزيل](https://releases.aspose.com/psd/java/)).  
- ملف PSD تجريبي (`sample.psd`) موجود في مجلد يمكنك الإشارة إليه من الكود الخاص بك.  

الآن بعد أن أصبح كل شيء جاهزًا، دعنا نغوص في التنفيذ.

## استيراد الحزم

أولاً، استورد الفئات المطلوبة للعمل مع صور PSD وذاكرة التخزين المؤقت للخطوط. ضع هذه العبارات في أعلى فئة Java الخاصة بك:

```java
import com.aspose.psd.Image;
import com.aspose.psd.OpenTypeFontsCache;

import com.aspose.psd.fileformats.psd.PsdImage;
import java.io.Console;
import java.util.concurrent.TimeUnit;
```

### الخطوة 1: تحميل صورة PSD (كيفية تحميل PSD)

نبدأ بتحميل ملف PSD الأصلي. يمنحنا ذلك كائن صورة أساسي يمكننا إعادة حفظه لاحقًا بعد تحديث ذاكرة التخزين المؤقت للخطوط.

```java
String dataDir = "Your Document Directory";

PsdImage image = (PsdImage)Image.load(dataDir + "sample.psd");
image.save(dataDir + "NoFont.psd");
```

- **شرح:**  
  - `Image.load` يقرأ الملف إلى الذاكرة.  
  - `image.save` ينشئ نسخة باسم **NoFont.psd** تعكس الحالة **قبل** توفر أي خطوط جديدة.  
  - هذه الخطوة مفيدة للمقارنة وتضمن أن تحديث الذاكرة الفعلي يغيّر الناتج.

### الخطوة 2: الانتظار لتثبيت الخط (تحسين أداء الصورة)

الآن نمنح المستخدم وقتًا لتثبيت الخط المطلوب يدويًا. في سيناريو واقعي قد تقوم بأتمتة هذه الخطوة، لكن الوقفة توضح آلية تحديث الذاكرة.

```java
System.out.println("You have 2 minutes to install the font");
Thread.sleep(2 * 60 * 1000);
OpenTypeFontsCache.updateCache();
```

- **شرح:**  
  - `Thread.sleep` يوقف التنفيذ لمدة **دقيقتين** (2 × 60 × 1000 مللي ثانية).  
  - `OpenTypeFontsCache.updateCache()` يجبر Aspose.PSD على إعادة فحص خطوط OpenType في النظام، مما يجعل أي خطوط مثبتة حديثًا متاحة فورًا للعرض.

### الخطوة 3: تحميل صورة PSD المحدثة (Load PSD image) و **save PSD file**

بعد تحديث الذاكرة، نقوم بتحميل ملف PSD الأصلي مرة أخرى. هذه المرة تكون معلومات الخط محدثة، ويمكننا **save PSD file** بالخط الصحيح.

```java
PsdImage image1 = (PsdImage)Image.load(dataDir + "sample.psd");
image1.save(dataDir + "HasFont.psd");
```

- **شرح:**  
  - التحميل الثاني يلتقط الخط المثبت حديثًا.  
  - حفظ الملف إلى **HasFont.psd** ينتج ملفًا يحتوي الآن على العرض الصحيح للخط، مما يؤكد أن تحديث الذاكرة نجح.

## المشكلات الشائعة والحلول

| المشكلة | السبب | الحل |
|-------|--------|----------|
| لا يزال ملف PSD المحفوظ يظهر الخط الافتراضي | الخط غير مثبت في موقع يتم فحصه من قبل نظام التشغيل | قم بتثبيت الخط في مجلد الخطوط النظامي (مثل `C:\Windows\Fonts` على ويندوز) وأعد تشغيل `updateCache()`. |
| `Thread.sleep` يرمي `InterruptedException` | توقيع الطريقة لا يتعامل مع الاستثناءات المُفحصّة | أضف `throws InterruptedException` إلى طريقة `main` أو غلف الاستدعاء بكتلة try‑catch. |
| `OpenTypeFontsCache.updateCache()` لا يفعل شيئًا | تشغيل على خادم بدون واجهة رسومية دون تكوين خطوط | تأكد من أن الخادم يحتوي على الخطوط المطلوبة وأن عملية Java لديها صلاحية قراءتها. |

## الأسئلة المتكررة

**س: هل Aspose.PSD متوافق مع جميع إصدارات Java؟**  
ج: Aspose.PSD للـ Java يدعم JDK 8 وما فوق، ويغطي معظم تطبيقات Java الحديثة.

**س: هل يمكنني استخدام Aspose.PSD في مشاريع تجارية؟**  
ج: نعم. يلزم وجود ترخيص تجاري للاستخدام في الإنتاج. يمكنك الحصول عليه من [صفحة الشراء](https://purchase.aspose.com/buy).

**س: هل هناك نسخة تجريبية مجانية متاحة؟**  
ج: بالطبع! قم بتنزيل نسخة تجريبية من [صفحة الإصدارات](https://releases.aspose.com/).

**س: أين يمكنني العثور على دعم المجتمع؟**  
ج: انضم إلى النقاش في [منتدى Aspose.PSD](https://forum.aspose.com/c/psd/34) للحصول على نصائح وحلول المشكلات.

**س: كيف يمكنني الحصول على ترخيص مؤقت للاختبار؟**  
ج: زر [صفحة الترخيص المؤقت](https://purchase.aspose.com/temporary-license/) لطلب ترخيص قصير الأمد.

## الخلاصة

لقد تعلمت الآن كيفية **save PSD file** بعد إجبار ذاكرة التخزين المؤقت للخطوط، مما يضمن أن مخرجات PSD تُظهر الخطوط الصحيحة في كل مرة. هذه التقنية جزء بسيط لكنه قوي من **تحسين معالجة الصور** ويمكن دمجها في سير عمل أكبر يتطلب تعديل PSD موثوق وعالي الأداء.

---

**آخر تحديث:** 2025-12-01  
**تم الاختبار مع:** Aspose.PSD للـ Java 24.12 (أحدث نسخة وقت الكتابة)  
**المؤلف:** Aspose  

{{< /blocks/products/pf/tutorial-page-section >}}

{{< /blocks/products/pf/main-container >}}
{{< /blocks/products/pf/main-wrap-class >}}

{{< blocks/products/products-backtop-button >}}